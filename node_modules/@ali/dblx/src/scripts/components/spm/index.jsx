import {findDOMNode} from 'react-dom';
import React,{Component} from 'react';
module.exports = ComposedComponent => class extends Component {
  componentDidMount() {
    var dom = findDOMNode(this);
    var domSPM = function(dom){
    if(!dom.hasChildNodes()) return;
      [].slice.call(dom.childNodes).forEach(function(node) {  
        if(node.nodeType != 1)  return;            
        var spm = node.getAttribute('data-aliyun-react-spm');
        if(spm){
          node.setAttribute('data-spm-click', 'gostr=/aliyun;locaid=d' + spm);
          node.removeAttribute('data-aliyun-react-spm');                            
        }
        domSPM(node);
      });
    };
    domSPM(dom); 
  }
  render() {
      return <ComposedComponent {...this.props}/>;
  }
};